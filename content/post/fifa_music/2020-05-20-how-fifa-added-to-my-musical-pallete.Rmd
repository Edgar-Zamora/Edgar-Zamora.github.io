---
title: Exploring how EA Sports' FIFA added to my preference in music using the spotifyr package in R
author: Edgar Zamora
date: '2020-05-20'
slug: how-fifa-added-to-my-musical-pallete
categories: []
tags:
  - rvest
  - spotify
  - ggplot
subtitle: ''
description: 'In this article I explore various attributes about each track from the FIFA video game using the spotifyr package in R'
image: 'https://images.unsplash.com/photo-1493711662062-fa541adb3fc8?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=750&q=80'
---

Anyone who has played *FIFA* has experienced every type of emotion ranging from anger after loosing that ranked match or pure bliss from winning a game against your older cousin in stoppage time. Whatever emotion that *FIFA* may engender from you, we keep coming back year after year to enjoy a game that offers more than just football (soccer). Over the years my reason for coming back to FIFA has grown from just being mostly about the game itself (game modes, new players, etc.) to now including the music that is used in throughout. I strongly believe that through *FIFA* I have been able to experience new reneges of music that otherwise may have not or taken long to enter my life.

My decision to write about how *FIFA* has changed and/or contributed to peoples musical preference is not new. I came across a Vice [article](https://www.vice.com/en_us/article/9k3jga/how-fifa-games-changed-our-tastes-in-music) that analyzes *FIFA* music starting with *FIFA* 99 up to *FIFA* 18. The article does an excllent describing the progess of what the music was and how it has changed into today's incarnation. Additional discussions of the impact of *FIFA*'s music choices can been seen on a [reddit](https://www.reddit.com/r/FIFA/comments/7nnx6f/fifa_music_should_be_considered_its_own_genre/) forum that explores whether *FIFA* music should be considered its own genre. 

There certainly are other pieces that offer similar type of analysis but what I feel is missing is an analysis that specifically looks at the features of each track. In this article I will visualize different features of each *FIFA* track including, but not limited to, energy, loudness, and other features. To do so I will be using the `spotifyr` package by Charlie Thompson, Josiah Parry, Donal Phipps, and Tom Wolff which is an "R wrapper for pulling track audio features and other information from Spotifyâ€™s Web API in bulk.". 


# Connecting to data with `spotifyr`

In order to connect to the Spotify API, you will have to make an account with the [Spotify for Developers](https://developer.spotify.com/dashboard/) site. I do believe you need an active Spotify account but it does not have to be premium. After setting that up, you will need to copy authentication from the developer site into R. It should look something like below with your own authorization code:

```{r authenticating, include=FALSE}
#Packages
library(tidyverse)
library(spotifyr)
library(knitr)
library(ggtext)
library(DT)
library(ggimage)
library(extrafont)

knitr::opts_chunk$set(warning = FALSE, message = FALSE)

#Connecting to Spotify data
Sys.setenv(SPOTIFY_CLIENT_ID = '9d31a6fe89fc4bbda898cd726a12d593')
Sys.setenv(SPOTIFY_CLIENT_SECRET = '79c0d581fa314b999d6f747e380dd412')

access_token <- get_spotify_access_token()

#Cleaning dataset with list of songs
fifa_playlist <- read_csv("fifa_music.csv") %>% 
  mutate(title = as.character(title),
         year = as.character(year)) %>% 
  rename(track_name = title,
         artist_name = artist) %>% 
  filter(track_name != "Kids",
         year >= "2002") %>% 
  group_by_all() %>% 
  summarise() %>% 
  ungroup()

#Importing FIFA font
font_import('EA Font v1.5 by Ghettoshark')

```


```{r authenticating_test, eval=FALSE}
library(tidyverse)
library(spotifyr)
library(knitr)
library(ggtext)
library(DT)
library(ggimage)
library(extrafont)

Sys.setenv(SPOTIFY_CLIENT_ID = 'your_client_id')
Sys.setenv(SPOTIFY_CLIENT_SECRET = 'your_client_secret')

access_token <- get_spotify_access_token()
```

For a detailed walk through I would recommend reading the [documention](https://www.rcharlie.com/spotifyr/) for the `spotifyr` package. 

# Data

To access the dataset, you can visit my [GitHub](https://github.com/Edgar-Zamora/Edgar-Zamora.github.io/tree/master/content/post/fifa_music) where I have the script and data that you can use if you would like to conduct your own analysis. In total there were 664 tracks for all *FIFA* games starting from 2002. I start at 2002 because the games before this included fewer than 10 songs which would have not been that insightful. After joining the list of tracks with the Spotify API using the `spotifyr` package, there were a total of 411 tracks that features. I encountered trouble when trying separate the result and error of my `map2` function. I listened to and followed Dani Chu's 2019 RStudio Conference [presentation](https://docs.google.com/presentation/d/1P9iT_TQUoxxCyvkfCLe5Y-9xBWpHh7btlP2mQ3XyNOM/edit#slide=id.g54c124210e_0_0) to aid in solving this issue. Though all the issues were not resolved it did keep me sane while having attempted it on my own. In the future I intend to go back and get a more complete list of tracks but for now I believe the current dataset should work.


Below delving into the attributes of the tracks, it would be interesting to see how the volume of tracks have changed over the years. In the figure below, we can see that the number of tracks included in each version of *FIFA* has flucated over time with the highest being with *FIFA* 17 and the lowest with *FIFA* 13 with an average of 36 tracks per game. *FIFA* 20 is not included in this data set because with the introduction of the new game mode, (Volta)[https://www.goal.com/en-us/news/fifa-20-volta-what-is-the-new-5-a-side-mode-how-is-it/13tbwqka87rab12rw9noitdpzt], it pushes the playlist to over 100 tracks. If we only consider the menu tracks its stays in mirrors the total of *FIFA* 19 with 43 total tracks.

```{r tracks_per_yr, echo=FALSE, fig.align='center', fig.height=8, fig.width=10}
#General Overview
#Number of trackers per game

rects <- tibble(
  xmin = c(-Inf, 6.5, 12.5, 18.5, 24.5, 30.5, 36.5, 43.5, 50.5),
  xmax = c(7, 13, 19, 25, 31, 37, 44, 51, Inf),
  ymin = rep(-Inf, 9),
  ymax = rep(Inf, 9)#4a6f28
)


fifa_playlist %>% 
  count(year) %>% 
  ggplot(aes(year, n)) +
  geom_rect(xmin = 0, xmax = 3.166667, ymin = 0, ymax = 53, fill = "#5b8b32", alpha = .1) +
  geom_rect(xmin = 3.166668, xmax = 6.333335, ymin = 0, ymax = 53, fill = "#4a6f28", alpha = .1) +
  geom_rect(xmin = 6.333336, xmax = 9.500002, ymin = 0, ymax = 53, fill = "#5b8b32", alpha = .1) +
  geom_rect(xmin = 9.500003, xmax = 12.66667, ymin = 0, ymax = 53, fill = "#4a6f28", alpha = .1) +
  geom_rect(xmin = 12.66668, xmax = 15.83335, ymin = 0, ymax = 53, fill = "#5b8b32", alpha = .1) +
  geom_rect(xmin = 15.83336, xmax = 19, ymin = 0, ymax = 53, fill = "#4a6f28", alpha = .1) +
  geom_line(aes(group = 1), colour = "#b6b3b3", linetype = "dashed", alpha =  .4) +
  geom_point(size = 16, colour = "white") +
  geom_text(aes(label = n), colour = "black", size = 6.5, family = "EA Font v1.5 by Ghettoshark") +
  labs(
    y = NULL,
    x = NULL,
    title = "Number of tracks per *FIFA* game over the years"
    ) +
  theme(
    panel.grid = element_blank(),
    panel.background = element_blank(),
    axis.ticks = element_blank(),
    axis.text.y = element_blank(),
    axis.text.x = element_text(size = 12, colour = "black", family = "EA Font v1.5 by Ghettoshark"),
    plot.title = element_markdown(size = 28, family = "EA Font v1.5 by Ghettoshark", face = "plain")
  )
```


In addition to knowing which edition has the most tracks, it is cool to know which artist(s) (I acknowledge some of these may be collobarations or bands) have been included most over the years. Of the 578 unique artists, only 65 (11%) have had one of thier songs included more than once in FIFA, which to me is great! I personally enjoy that EA Sports includes various artists becuase it allows me to explore artists that I may have not encountered on my own. Below you can use the table to search through all the artists and see how many times they have been included.

```{r count_track_tbl, echo=FALSE}
#Top 25 featured artists
fifa_playlist %>% 
  count(artist_name) %>%
  rename(Artist = artist_name,
         `Number of tracks` = n) %>% 
  arrange(desc(`Number of tracks`)) %>% 
  datatable(caption = "Number of times an Artist has been included in FIFA")
```

#Exploring the tracks


